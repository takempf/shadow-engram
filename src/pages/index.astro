---
// src/pages/index.astro
import { db, Contact } from 'astro:db';

const contacts = await db.select().from(Contact);
---
<h1>My Contacts</h1>
<ul>
  {contacts.map(contact => (
    <li>
      <strong>{contact.name}</strong><br/>
      Email: {contact.email}<br/>
      {contact.phone && `Phone: ${contact.phone}`}
      <a href={`/edit-contact/${contact.id}`}>Edit</a>
      <form method="POST" action={`/delete-contact/${contact.id}`}>
        <button type="submit">Delete</button>
      </form>
    </li>
  ))}
</ul>
<a href="/add-contact">Add New Contact</a>